---
import '../styles/global.css';

interface Props {
  title: string;
}

const { title } = Astro.props;
const currentPath = Astro.url.pathname;

const navItems = [
  { href: '/admin', label: 'Dashboard', icon: 'ğŸ“Š' },
  { href: '/admin/courses', label: 'Kursy', icon: 'ğŸ“…' },
  { href: '/admin/reservations', label: 'Rezerwacje', icon: 'ğŸ“' },
  { href: '/admin/participants', label: 'Uczestnicy', icon: 'ğŸ‘¥' },
];
---

<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{title} | Panel Admin - ADR Pomorze</title>
  <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
</head>
<body class="min-h-screen bg-gray-100">
  <!-- Top nav -->
  <nav class="bg-[var(--primary)] text-white">
    <div class="max-w-7xl mx-auto px-4">
      <div class="flex items-center justify-between h-16">
        <div class="flex items-center gap-6">
          <a href="/admin" class="flex items-center gap-2">
            <div class="w-8 h-8 bg-[var(--accent)] rounded flex items-center justify-center">
              <svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />
              </svg>
            </div>
            <span class="font-bold">ADR Admin</span>
          </a>
          
          <div class="hidden md:flex items-center gap-4">
            {navItems.map(item => (
              <a 
                href={item.href} 
                class={`px-3 py-2 rounded-lg text-sm transition-colors ${
                  currentPath === item.href 
                    ? 'bg-white/20' 
                    : 'hover:bg-white/10'
                }`}
              >
                <span class="mr-1">{item.icon}</span>
                {item.label}
              </a>
            ))}
          </div>
        </div>
        
        <div class="flex items-center gap-4">
          <a href="/" target="_blank" class="text-sm text-white/70 hover:text-white">
            Zobacz stronÄ™ â†’
          </a>
          <a href="/admin/logout" class="text-sm text-white/70 hover:text-white">
            Wyloguj
          </a>
        </div>
      </div>
    </div>
  </nav>
  
  <!-- Mobile nav -->
  <div class="md:hidden bg-white border-b px-4 py-2 flex gap-2 overflow-x-auto">
    {navItems.map(item => (
      <a 
        href={item.href} 
        class={`px-3 py-2 rounded-lg text-sm whitespace-nowrap ${
          currentPath === item.href 
            ? 'bg-[var(--primary)] text-white' 
            : 'bg-gray-100 text-gray-700'
        }`}
      >
        {item.icon} {item.label}
      </a>
    ))}
  </div>
  
  <!-- Main content -->
  <main class="max-w-7xl mx-auto px-4 py-6">
    <h1 class="text-2xl font-bold text-[var(--primary)] mb-6">{title}</h1>
    <slot />
  </main>
  
  <!-- Scripts for interactivity -->
  <script>
    // Helper dla API calls
    window.api = {
      async get(url) {
        const res = await fetch(url);
        return res.json();
      },
      async post(url, data) {
        const res = await fetch(url, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(data),
        });
        return res.json();
      },
      async put(url, data) {
        const res = await fetch(url, {
          method: 'PUT',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(data),
        });
        return res.json();
      },
      async delete(url) {
        const res = await fetch(url, { method: 'DELETE' });
        return res.json();
      }
    };
  </script>
</body>
</html>
